<div class="page-width">
{% if section.settings.section_heading !=  blank %}
    <div class="title-wrapper">
        <h2>{{ section.settings.section_heading }}</h2>
    </div>
{% endif %}

    {% if section.settings.show_banner %}

    {% render 'lazy-image' , src: article.image %}

    {% endif %}
    <header {{ block.shopify_attributes }}>
        <h1 class="article-template__title" itemprop="headline">{{ article.title | escape }}</h1>
        {%- if section.settings.blog_show_date -%}
          <span class="circle-divider caption-with-letter-spacing" itemprop="dateCreated pubdate datePublished">{{ article.published_at | time_tag: format: 'date' }}</span>
        {%- endif -%}
        {%- if block.settings.blog_show_author -%}
          <span class="caption-with-letter-spacing" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span itemprop="name">{{ article.author }}</span>
          </span>
        {%- endif -%}
      </header>

      <div class="content">
        {{ article.content }}
      </div>

     <div class="h3">
        <a href="{{ blog.url }}" class="article-template__link link animate-arrow">
            <span class="icon-wrap">{% render 'icon-arrow' %}</span>
            {{ 'blogs.article.back_to_blog' | t: title: blog.title }}
          </a>
     </div>

     {% if section.settings.blog != blank %}
    <div class="custom-blog-list">
        <div class="title-wrapper">
            <h2>{{ section.settings.section_heading }}</h2>
        </div>

      {% unless blog.id == article.id %}

       <div class="grid grid--3-col-desktop grid--1-col grid--2-col-tablet">
            {% for article in blog.articles limit: section.settings.article_limit %}
            
                <div class="grid__item custom-card" >
                    {% render 'dm-article-card' , article: article %}
                </div>
            {% endfor %}
        </div>
        
      {% endunless %}

       
    </div>
{% endif %}




</div>

{% schema %}
{
    "name": "Article Page",
    "tag":"section",
   "class": "section",
  "settings": [
   {
    "type": "header",
    "content": "Article Page Settings"
   },
   {
    "type":"text",
    "id":"section_heading",
    "label": "Section Heading",
    "default":"Article Page"
    },
   {
    "type": "checkbox",
    "id": "show_banner",
    "label": "Show Banner",
    "default": true
   },
   {
    "type": "checkbox",
    "id": "show_author",
    "label": "Show Author",
    "default": true
   },
   {
    "type": "checkbox",
    "id": "show_date",
    "label": "Show Date",
    "default": true
   },

{
    "type":"blog",
    "id":"blog",
    "label":"Choose Blog post"
},
{
    "type":"range",
    "id":"article_limit",
    "label":"Blog post limit",
    "min": 3,
    "max": 6,
    "step": 1,
    "default": 3
}

  ]
}
{% endschema %}